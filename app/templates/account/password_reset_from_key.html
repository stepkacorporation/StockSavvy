{% extends "account/base.html" %}

{% load crispy_forms_tags %}

{% block title %}Сброс пароля | MakeResume{% endblock %}

{% block accounts_content %}
    <h1 class="fs-5 mb-3 fw-bold">Сброс пароля</h1>

    {% if messages %}
        {% for message in messages %}
           <div class="alert alert-{{ message.tags }}">
               {{ message }}
           </div>
        {% endfor %}
    {% endif %}

    {% if form.non_field_errors  %}
        <div class="alert alert-danger mb-3">
            {% for field, errors in form.errors.items %}
                {% if errors %}
                    <div>{{ errors.0 }}</div>
                {% endif %}
            {% endfor %}
        </div>
    {% endif %}

    {% if token_fail %}
        {% url 'account_reset_password' as passwd_reset_url %}
        <p>Срок действия ссылки истек или отправлены неверные данные.  Для сброса пароля <a href="{{ passwd_reset_url }}">перейдите по ссылке</a></p>
    {% else %}
        {% if form %}
            <form method="POST" action="{{ action_url }}">
                {% csrf_token %}
                {{ form.password1|as_crispy_field }}
                {{ form.password2|as_crispy_field }}
                <div class="text-center">
                    <button type="submit" class="btn btn-primary w-75 mb-3">Сбросить пароль</button>
                </div>
            </form>
        {% else %}
            <p>Ваш пароль изменён</p>
        {% endif %}
    {% endif %}
{% endblock %}
